<!DOCTYPE html>
<html>
<head>
    <title>Content-Based Movie Recommender</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 10px;
        }
        .subtitle {
            text-align: center;
            color: #666;
            font-size: 14px;
            margin-bottom: 30px;
        }
        .input-group {
            text-align: center;
            margin-bottom: 30px;
        }
        select {
            padding: 12px;
            font-size: 16px;
            border: 2px solid #ddd;
            border-radius: 5px;
            width: 300px;
            margin-right: 10px;
        }
        button {
            padding: 12px 24px;
            font-size: 16px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover {
            background-color: #0056b3;
        }
        .results {
            margin-top: 30px;
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 5px;
        }
        .movie-card {
            background: white;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            border-left: 4px solid #007bff;
        }
        .movie-title {
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }
        .movie-details {
            font-size: 14px;
            color: #666;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Content-Based Movie Recommender</h1>
        <div class="subtitle">
            This demo uses movie overviews and a 4-stage feature-engineering workflow (simulating LLM-powered feature extraction)
        </div>
        
        <div class="input-group">
            <select id="movieSelect">
                <option value="">Select a movie you like</option>
            </select>
            <button onclick="getRecommendations()">Get Recommendations</button>
        </div>
        
        <div id="results" class="results" style="display: none;">
            <h3>Because you liked "<span id="selectedMovie"></span>", we recommend:</h3>
            <div id="recommendationsList"></div>
        </div>
    </div>

    <script>
        // Your movie data with the vectors that are working
        const movies = [
            {"title": "Toy Story", "vector": [0, 0, 0, 0, 0, 0], "overview": "..."},
            {"title": "Jumanji", "vector": [0, 1, 0, 0, 0, 1], "overview": "..."},
            {"title": "Grumpier Old Men", "vector": [0, 0, 0, 1, 0, 0], "overview": "..."},
            {"title": "Waiting to Exhale", "vector": [0, 0, 1, 0, 0, 0], "overview": "..."},
            {"title": "Father of the Bride Part II", "vector": [0, 0, 0, 0, 0, 0], "overview": "..."},
            {"title": "Heat", "vector": [1, 0, 0, 0, 0, 0], "overview": "..."},
            {"title": "Sabrina", "vector": [0, 0, 0, 0, 0, 0], "overview": "..."},
            {"title": "Tom and Huck", "vector": [0, 0, 0, 1, 1, 0], "overview": "..."},
            {"title": "Sudden Death", "vector": [0, 0, 0, 0, 0, 0], "overview": "..."},
            {"title": "GoldenEye", "vector": [0, 0, 0, 0, 0, 0], "overview": "..."},
            {"title": "The American President", "vector": [0, 0, 0, 0, 0, 0], "overview": "..."},
            {"title": "Dracula: Dead and Loving It", "vector": [0, 0, 0, 0, 0, 0], "overview": "..."},
            {"title": "Balto", "vector": [0, 0, 0, 0, 0, 0], "overview": "..."},
            {"title": "Nixon", "vector": [0, 0, 0, 0, 0, 0], "overview": "..."},
            {"title": "Cutthroat Island", "vector": [0, 0, 0, 0, 0, 0], "overview": "..."},
            {"title": "Casino", "vector": [0, 0, 0, 0, 0, 1], "overview": "..."},
            {"title": "Sense and Sensibility", "vector": [0, 0, 0, 0, 0, 0], "overview": "..."},
            {"title": "Four Rooms", "vector": [0, 0, 0, 0, 0, 0], "overview": "..."},
            {"title": "Ace Ventura: When Nature Calls", "vector": [1, 0, 0, 0, 0, 0], "overview": "..."},
            {"title": "Money Train", "vector": [0, 0, 0, 0, 0, 0], "overview": "..."},
            {"title": "Get Shorty", "vector": [0, 0, 0, 0, 0, 0], "overview": "..."},
            {"title": "Copycat", "vector": [0, 0, 0, 0, 0, 0], "overview": "..."},
            {"title": "Assassins", "vector": [0, 0, 0, 0, 0, 0], "overview": "..."},
            {"title": "Powder", "vector": [0, 0, 0, 0, 0, 0], "overview": "..."},
            {"title": "Leaving Las Vegas", "vector": [0, 0, 0, 0, 0, 0], "overview": "..."},
            {"title": "Othello", "vector": [0, 0, 0, 0, 0, 1], "overview": "..."},
            {"title": "Now and Then", "vector": [0, 1, 0, 0, 0, 0], "overview": "..."},
            {"title": "Persuasion", "vector": [0, 0, 1, 1, 0, 0], "overview": "..."},
            {"title": "The City of Lost Children", "vector": [0, 0, 0, 0, 0, 0], "overview": "..."},
            {"title": "Shanghai Triad", "vector": [0, 0, 0, 1, 0, 0], "overview": "..."},
            {"title": "Dangerous Minds", "vector": [0, 0, 0, 0, 0, 0], "overview": "..."},
            {"title": "Twelve Monkeys", "vector": [0, 0, 0, 0, 0, 0], "overview": "..."},
            {"title": "Babe", "vector": [0, 0, 0, 0, 0, 0], "overview": "..."},
            {"title": "Carrington", "vector": [1, 0, 0, 0, 0, 0], "overview": "..."},
            {"title": "Dead Man Walking", "vector": [0, 0, 0, 0, 0, 0], "overview": "..."},
            {"title": "Across the Sea of Time", "vector": [0, 0, 0, 1, 0, 0], "overview": "..."},
            {"title": "It Takes Two", "vector": [0, 0, 0, 0, 0, 0], "overview": "..."},
            {"title": "Clueless", "vector": [0, 0, 0, 0, 0, 0], "overview": "..."},
            {"title": "Cry, the Beloved Country", "vector": [1, 0, 0, 0, 0, 0], "overview": "..."},
            {"title": "Richard III", "vector": [0, 0, 0, 0, 0, 0], "overview": "..."},
            {"title": "Dead Presidents", "vector": [1, 0, 0, 0, 0, 0], "overview": "..."},
            {"title": "Restoration", "vector": [0, 0, 1, 0, 0, 0], "overview": "..."},
            {"title": "Mortal Kombat", "vector": [1, 0, 0, 0, 0, 1], "overview": "..."},
            {"title": "To Die For", "vector": [0, 0, 0, 0, 0, 1], "overview": "..."},
            {"title": "How To Make An American Quilt", "vector": [0, 0, 1, 0, 0, 0], "overview": "..."},
            {"title": "Se7en", "vector": [0, 0, 0, 0, 0, 1], "overview": "..."},
            {"title": "Pocahontas", "vector": [1, 0, 1, 0, 0, 0], "overview": "..."},
            {"title": "When Night Is Falling", "vector": [0, 0, 0, 0, 0, 0], "overview": "..."},
            {"title": "The Usual Suspects", "vector": [0, 0, 0, 0, 0, 0], "overview": "..."},
            {"title": "Guardian Angel", "vector": [0, 0, 1, 0, 0, 0], "overview": "..."}
        ];

        // Feature mapping for display
        const featureMap = ["Action", "Comedy", "Drama", "Romance", "Thriller", "Family"];

        function cosineSimilarity(vecA, vecB) {
            let dotProduct = 0;
            let normA = 0;
            let normB = 0;
            
            for (let i = 0; i < vecA.length; i++) {
                dotProduct += vecA[i] * vecB[i];
                normA += vecA[i] * vecA[i];
                normB += vecB[i] * vecB[i];
            }
            
            if (normA === 0 || normB === 0) return 0;
            return dotProduct / (Math.sqrt(normA) * Math.sqrt(normB));
        }

        function populateDropdown() {
            const select = document.getElementById('movieSelect');
            select.innerHTML = '<option value="">Select a movie you like</option>';
            
            movies.forEach(movie => {
                const option = document.createElement('option');
                option.value = movie.title;
                option.textContent = movie.title;
                select.appendChild(option);
            });
        }

        function getMovieFeatures(movie) {
            const features = [];
            movie.vector.forEach((value, index) => {
                if (value === 1) {
                    features.push(featureMap[index]);
                }
            });
            return features;
        }

        function getRecommendations() {
            const selectedMovieTitle = document.getElementById('movieSelect').value;
            const selectedMovie = movies.find(m => m.title === selectedMovieTitle);
            
            if (!selectedMovie) {
                alert('Please select a movie first!');
                return;
            }
            
            const similarities = movies.map(movie => ({
                title: movie.title,
                similarity: cosineSimilarity(selectedMovie.vector, movie.vector),
                features: getMovieFeatures(movie)
            }));
            
            similarities.sort((a, b) => b.similarity - a.similarity);
            const recommendations = similarities.filter(m => m.title !== selectedMovie.title).slice(0, 5);
            
            // Display results
            document.getElementById('selectedMovie').textContent = selectedMovie.title;
            const recommendationsList = document.getElementById('recommendationsList');
            recommendationsList.innerHTML = '';
            
            recommendations.forEach(rec => {
                const movieCard = document.createElement('div');
                movieCard.className = 'movie-card';
                
                // Format features for display (like in your reference image)
                const subgenres = rec.features.slice(0, Math.min(2, rec.features.length)).join(', ') || 'Drama';
                const themes = rec.features.slice(2).join(', ') || 'Friendship';
                
                movieCard.innerHTML = `
                    <div class="movie-title">${rec.title}</div>
                    <div class="movie-details">Sub-genres: ${subgenres} | Themes: ${themes}</div>
                `;
                recommendationsList.appendChild(movieCard);
            });
            
            document.getElementById('results').style.display = 'block';
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', populateDropdown);
    </script>
</body>
</html>
